A. Windows build

1. Make the following changes to the code:
1.1 In cpp\config\Make.rules.mak
SLICEPARSERLIB		= $(libdir)\slice$(LIBSUFFIX).lib
To:
SLICEPARSERLIB		= $(libdir)\slice-$(VERSION)$(LIBSUFFIX).lib

1.2 Change Makefile.mak in the sub-projects: Freeze, Glacier2Lib, Ice, IceBox, IceGridLib, IceSSL, IceStormLib, IceUtil, Slice
In cpp\src\Ice\Makefile.mak
LIBNAME		= $(top_srcdir)\lib\ice$(LIBSUFFIX).lib
To:
LIBNAME		= $(top_srcdir)\lib\ice-$(VERSION)$(LIBSUFFIX).lib

1.3 Changes headers under cpp\include in the following: 
Config.h in IceUtil
 In cpp\include\IceUtil\Config.h
 
 Replace the following:
#   ifdef ICE_CPP11_MAPPING
# ...
# ...
#   endif

To:
#   ifdef ICE_CPP11_MAPPING
#      if defined(_DEBUG)
#         if defined(ICE_OS_UWP)
#            define ICE_LIBNAME(NAME) NAME "-" ICE_STRING_VERSION "uwp++11d.lib"
#         else
#            define ICE_LIBNAME(NAME) NAME "-" ICE_STRING_VERSION "++11d.lib"
#         endif
#      else
#         if defined(ICE_OS_UWP)
#            define ICE_LIBNAME(NAME) NAME "-" ICE_STRING_VERSION "uwp++11.lib"
#         else
#            define ICE_LIBNAME(NAME) NAME "-" ICE_STRING_VERSION "++11.lib"
#         endif
#      endif
#   else
#      if defined(_DEBUG)
#         if defined(ICE_OS_UWP)
#            define ICE_LIBNAME(NAME) NAME "-" ICE_STRING_VERSION "uwpd.lib"
#         else
#            define ICE_LIBNAME(NAME) NAME "-" ICE_STRING_VERSION "d.lib"
#         endif
#      else
#         if defined(ICE_OS_UWP)
#            define ICE_LIBNAME(NAME) NAME "-" ICE_STRING_VERSION "uwp.lib"
#         else
#            define ICE_LIBNAME(NAME) NAME "-" ICE_STRING_VERSION ".lib"
#         endif
#      endif
#   endif


2. Build Ice and copy the build to another directory, e.g. C:\Ice-x.x.x
msbuild msbuild\ice.proj /p:Configuration=Debug /p:Platform=x64 /t:NuGetPack
copy %ICE_ROOT%\cpp\msbuild\zeroc.ice.v141\build\native to %TargetDir%
msbuild msbuild\ice.proj /p:Configuration=Release /p:Platform=x64 /t:NuGetPack
copy %ICE_ROOT%\cpp\msbuild\zeroc.ice.v141\build\native and %ICE_ROOT%\cpp\msbuild\zeroc.ice.v141\tools to %TargetDir%

3. Update cpp/config/Make.rules.mak to build release binary 
prefix			= C:\Ice-Release-$(VERSION)
TO:
prefix			= C:\Ice-$(VERSION)

And
#OPTIMIZE		= yes
To:
OPTIMIZE		= yes

4. Repeat step 2

B. Linux build
1. yum install libdb-cxx-devel.x86_64
2. follow https://github.com/zeroc-ice/ice/blob/master/cpp/BuildInstructionsLinux.md
   - edit cpp/config/Make.rules 
     - set prefix for temporary installation path
   - make CONFIGS=ALL -j8

C. use prepare.sh copy and rename necessary headers and libraries into individual lib folder
