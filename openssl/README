In ms\do_win64a.bat:
Insert 127.0.0.1 between the following two lines:
perl ms\uplink-x86_64.pl masm > ms\uptable.asm
ml64 -c -Foms\uptable.obj ms\uptable.asm

to become:
perl ms\uplink-x86_64.pl masm > ms\uptable.asm
ping 127.0.0.1
ml64 -c -Foms\uptable.obj ms\uptable.asm

In ms\uplink-x86_64.pl:
Change:
open OUT,"| \"$^X\" ${dir}../crypto/perlasm/x86_64-xlate.pl $output";
to become:
open OUT,"| \"$^X\" ${dir}/../crypto/perlasm/x86_64-xlate.pl $output";

For release build, run:
 > perl Configure VC-WIN64A no-asm
 > ms\do_win64a

Change /MT to /MD in ms\nt.mak: 
CFLAG= /MT /Ox -DOPENSSL_THREADS  -DDSO_WIN32 -W3 -Gs0 -Gy -nologo -DOPENSSL_SYSNAME_WIN32 -DWIN32_LEAN_AND_MEAN -DL_ENDIAN -DUNICODE -D_UNICODE -D_CRT_SECURE_NO_DEPRECATE -DOPENSSL_NO_RC5 -DOPENSSL_NO_MD2 -DOPENSSL_NO_SSL2 -DOPENSSL_NO_KRB5 -DOPENSSL_NO_JPAKE -DOPENSSL_NO_WEAK_SSL_CIPHERS -DOPENSSL_NO_DYNAMIC_ENGINE    
to:
CFLAG= /MD /Ox -DOPENSSL_THREADS  -DDSO_WIN32 -W3 -Gs0 -Gy -nologo -DOPENSSL_SYSNAME_WIN32 -DWIN32_LEAN_AND_MEAN -DL_ENDIAN -DUNICODE -D_UNICODE -D_CRT_SECURE_NO_DEPRECATE -DOPENSSL_NO_RC5 -DOPENSSL_NO_MD2 -DOPENSSL_NO_SSL2 -DOPENSSL_NO_KRB5 -DOPENSSL_NO_JPAKE -DOPENSSL_NO_WEAK_SSL_CIPHERS -DOPENSSL_NO_DYNAMIC_ENGINE    

 > nmake -f ms\nt.mak
 > cd out32
 > ..\ms\test

For debug build, run:
 > perl Configure debug-VC-WIN64A no-asm
 > ms\do_win64a

Change /MTd to /MDd and /Zi to /Z7 in ms\nt.mak 
CFLAG= /MTd /Od -DDEBUG -D_DEBUG -DOPENSSL_THREADS  -DDSO_WIN32 -W3 -Gs0 -Gy -Zi -nologo -DOPENSSL_SYSNAME_WIN32 -DWIN32_LEAN_AND_MEAN -DL_ENDIAN -DUNICODE -D_UNICODE -D_CRT_SECURE_NO_DEPRECATE -DOPENSSL_NO_RC5 -DOPENSSL_NO_MD2 -DOPENSSL_NO_SSL2 -DOPENSSL_NO_KRB5 -DOPENSSL_NO_JPAKE -DOPENSSL_NO_WEAK_SSL_CIPHERS -DOPENSSL_NO_DYNAMIC_ENGINE    
APP_CFLAG= /Zi /Fd$(TMP_D)/app
LIB_CFLAG=/Zl /Zi /Fd$(TMP_D)/lib
to:
CFLAG= /MDd /Od -DDEBUG -D_DEBUG -DOPENSSL_THREADS  -DDSO_WIN32 -W3 -Gs0 -Gy -Zi -nologo -DOPENSSL_SYSNAME_WIN32 -DWIN32_LEAN_AND_MEAN -DL_ENDIAN -DUNICODE -D_UNICODE -D_CRT_SECURE_NO_DEPRECATE -DOPENSSL_NO_RC5 -DOPENSSL_NO_MD2 -DOPENSSL_NO_SSL2 -DOPENSSL_NO_KRB5 -DOPENSSL_NO_JPAKE -DOPENSSL_NO_WEAK_SSL_CIPHERS -DOPENSSL_NO_DYNAMIC_ENGINE    
APP_CFLAG= /Z7 /Fd$(TMP_D)/app
LIB_CFLAG=/Zl /Z7 /Fd$(TMP_D)/lib

 > nmake -f ms\nt.mak
 > cd out32.dbg
 > ..\ms\test

Note that a NUL file owned by Administrator may be created.

Copy openssl from inc32 to devtools\mavenize\openssl\src\nar\resources\noarch\include
Copy *.lib from out32dll to devtools\mavenize\openssl\src\nar\resources\aol\amd64-Windows-msvc\lib
Rename:	((d) for debug lib)
libeay32.lib -> openssl_libeay-1.0.2k(d).lib
ssleay32.lib -> openssl_ssleay-1.0.2k(d).lib


Reference:
http://developer.covenanteyes.com/building-openssl-for-visual-studio/

Linux:
1. mvn versions:set -DnewVersion=1.0-dummy
2. update all child pom.xml, comment out <configuration>...</configuration> in <artifactId>nar-maven-plugin</artifactId>
3. remove openssl\openssl_ssleay\src\nar\resources\noarch\include\openssl and replace by dummy.h
4. mvn clean deploy
5. mvn versions:revert

 
